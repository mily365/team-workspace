<mat-progress-bar *ngIf="isShowLoading" color="accent" mode="indeterminate"></mat-progress-bar>
<table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortChanged($event)" class="mat-elevation-z8">
  <ng-container *ngFor="let colInfo of toDisplayColumns" [matColumnDef]="colInfo.identity">
    <ng-container *ngIf="colInfo.isAllInOne;else noAll" matColumnDef="allInOne">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>
        <mat-icon *ngIf="colInfo.icon!=''">{{colInfo.icon}}</mat-icon>
        {{colInfo.text}}
      </th>
      <td mat-cell *matCellDef="let element">
        <ng-container *ngTemplateOutlet="template;context: {row:element,actions:actions}">
          <ng-content></ng-content>
        </ng-container>
      </td>
    </ng-container>
    <ng-template #noAll>
      <ng-container *ngIf="colInfo.isSort;else noSort">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <mat-icon *ngIf="colInfo.icon!=''">{{colInfo.icon}}</mat-icon>
          {{colInfo.text}}
        </th>
      </ng-container>
      <ng-template #noSort>
        <th mat-header-cell *matHeaderCellDef>
          <mat-icon *ngIf="colInfo.icon!=''">{{colInfo.icon}}</mat-icon>
          {{colInfo.text}}
        </th>
      </ng-template>
      <td mat-cell *matCellDef="let element">
        <ng-container *ngIf="colInfo.isAction;else noAction;">
<!--          <button *ngFor="let action of actions" (click)="handleClick(element)"  mat-button color="primary">{{action.text}}</button>-->
          <button mat-icon-button *ngFor="let action of actions" (click)="handleClick(element)"  mat-button color="primary">
            <mat-icon> {{action.text}}</mat-icon>

          </button>
        </ng-container>
        <ng-template #noAction>
          {{element[colInfo.identity]}}
        </ng-template>
      </td>
    </ng-template>

  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  <!-- Row shown when there is no matching data that will be provided to the wrapper table. -->
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" [attr.colspan]="displayedColumns.length">No data</td>
  </tr>
</table>
<mat-paginator [length]="resultCount" (page)="pageChange($event)"  [pageSizeOptions]="pageSizeOptions" showFirstLastButtons></mat-paginator>
